<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Products - Fashion Designer Studio</title>
        <meta
            name="description"
            content="Browse our collection of unique fashion designs"
        />

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />

        <!-- Font Awesome Icons -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/style.css" />

        <!-- Netlify Identity -->
        <script
            type="text/javascript"
            src="https://identity.netlify.com/v1/netlify-identity-widget.js"
        ></script>
    </head>
    <body>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
            <div class="container">
                <a
                    class="navbar-brand fw-bold"
                    href="index.html"
                    id="site-title"
                    >Fashion Studio</a
                >
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarNav"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="products.html"
                                >All Products</a
                            >
                        </li>
                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                            >
                                Categories
                            </a>
                            <ul
                                class="dropdown-menu"
                                aria-labelledby="navbarDropdown"
                            >
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="products.html?category=sarees"
                                        >Sarees</a
                                    >
                                </li>
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="products.html?category=kurtis"
                                        >Kurtis</a
                                    >
                                </li>
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="products.html?category=blouses"
                                        >Blouses</a
                                    >
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#about"
                                >About</a
                            >
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#contact"
                                >Contact</a
                            >
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Page Header -->
        <section class="py-5 bg-light">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <h1 class="display-4 fw-bold">Our Collection</h1>
                        <p class="lead">Discover our latest fashion pieces</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filters and Sorting -->
        <section class="py-4">
            <div class="container">
                <div class="row">
                    <div class="col-md-8">
                        <div class="d-flex flex-wrap gap-2 mb-4">
                            <button
                                class="btn btn-outline-primary filter-btn active"
                                data-category="all"
                            >
                                All
                            </button>
                            <button
                                class="btn btn-outline-primary filter-btn"
                                data-category="sarees"
                            >
                                Sarees
                            </button>
                            <button
                                class="btn btn-outline-primary filter-btn"
                                data-category="kurtis"
                            >
                                Kurtis
                            </button>
                            <button
                                class="btn btn-outline-primary filter-btn"
                                data-category="blouses"
                            >
                                Blouses
                            </button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-4">
                            <label for="sortSelect" class="form-label fw-bold"
                                >Sort by:</label
                            >
                            <select class="form-select" id="sortSelect">
                                <option value="newest">Newest First</option>
                                <option value="price-low">
                                    Price: Low to High
                                </option>
                                <option value="price-high">
                                    Price: High to Low
                                </option>
                                <option value="name-az">Name: A to Z</option>
                                <option value="name-za">Name: Z to A</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Grid -->
        <section class="py-5">
            <div class="container">
                <div class="row" id="products-grid">
                    <!-- Products will be loaded here -->
                </div>

                <!-- No products message -->
                <div class="row" id="no-products" style="display: none">
                    <div class="col-12 text-center py-5">
                        <i
                            class="fas fa-shopping-bag fa-3x text-muted mb-3"
                        ></i>
                        <h3 class="text-muted">No products found</h3>
                        <p class="text-muted">
                            Check back later for new arrivals!
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer-section bg-dark text-white py-5">
            <div class="container">
                <div class="row">
                    <!-- Brand Section -->
                    <div class="col-lg-4 col-md-6 mb-4">
                        <h5 class="footer-brand mb-3" id="footer-site-title">Fashion Studio</h5>
                        <p class="footer-description mb-3" id="footer-description">
                            Discover unique and sophisticated fashion pieces crafted with passion and attention to detail.
                        </p>
                        <div class="social-links">
                            <a href="#" class="social-link me-3" id="footer-whatsapp" title="WhatsApp">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                            <a href="#" class="social-link me-3" id="footer-instagram" title="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="mailto:info@fashionstudio.com" class="social-link" title="Email">
                                <i class="fas fa-envelope"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Quick Links -->
                    <div class="col-lg-2 col-md-6 mb-4">
                        <h6 class="footer-heading mb-3">Quick Links</h6>
                        <ul class="footer-links list-unstyled">
                            <li><a href="index.html" class="footer-link">Home</a></li>
                            <li><a href="products.html" class="footer-link">Products</a></li>
                            <li><a href="index.html#about" class="footer-link">About</a></li>
                            <li><a href="index.html#contact" class="footer-link">Contact</a></li>
                        </ul>
                    </div>

                    <!-- Categories -->
                    <div class="col-lg-2 col-md-6 mb-4">
                        <h6 class="footer-heading mb-3">Categories</h6>
                        <ul class="footer-links list-unstyled">
                            <li><a href="products.html?category=sarees" class="footer-link">Sarees</a></li>
                            <li><a href="products.html?category=kurtis" class="footer-link">Kurtis</a></li>
                            <li><a href="products.html?category=blouses" class="footer-link">Blouses</a></li>
                            <li><a href="products.html" class="footer-link">All Products</a></li>
                        </ul>
                    </div>

                    <!-- Legal -->
                    <div class="col-lg-2 col-md-6 mb-4">
                        <h6 class="footer-heading mb-3">Legal</h6>
                        <ul class="footer-links list-unstyled">
                            <li><a href="privacy-policy.html" class="footer-link">Privacy Policy</a></li>
                            <li><a href="terms-conditions.html" class="footer-link">Terms & Conditions</a></li>
                            <li><a href="return-policy.html" class="footer-link">Return Policy</a></li>
                            <li><a href="admin/" class="footer-link">Admin</a></li>
                        </ul>
                    </div>

                    <!-- Contact Info -->
                    <div class="col-lg-2 col-md-6 mb-4">
                        <h6 class="footer-heading mb-3">Contact</h6>
                        <div class="contact-info">
                            <p class="contact-item mb-2">
                                <i class="fas fa-phone me-2"></i>
                                <span id="footer-phone">+91 88794 03922</span>
                            </p>
                            <p class="contact-item mb-2">
                                <i class="fas fa-envelope me-2"></i>
                                info@fashionstudio.com
                            </p>
                            <p class="contact-item mb-0">
                                <i class="fas fa-clock me-2"></i>
                                9 AM - 8 PM (Mon-Sat)
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Bottom Bar -->
                <hr class="footer-divider my-4">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <p class="copyright-text mb-0">
                            &copy; 2025 <span id="footer-copyright-brand">Fashion Studio</span>. All rights reserved.
                        </p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <p class="powered-by mb-0">
                            <small class="text-muted">Powered by Netlify CMS</small>
                        </p>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Custom JS -->
        <script src="js/main.js"></script>

        <script>
            // Load and display products
            document.addEventListener("DOMContentLoaded", function () {
                loadProducts();
                setupFilters();
                setupSorting();

                // Check for category parameter in URL
                const urlCategory = getUrlParameter("category");
                if (urlCategory) {
                    // Wait for products to load, then filter
                    setTimeout(() => {
                        const filterBtn = document.querySelector(
                            `[data-category="${urlCategory}"]`,
                        );
                        if (filterBtn) {
                            document
                                .querySelectorAll(".filter-btn")
                                .forEach((btn) =>
                                    btn.classList.remove("active"),
                                );
                            filterBtn.classList.add("active");
                            filterProducts(urlCategory);
                        }
                    }, 500);
                }
            });

            function setupFilters() {
                const filterBtns = document.querySelectorAll(".filter-btn");
                filterBtns.forEach((btn) => {
                    btn.addEventListener("click", function () {
                        // Update active button
                        filterBtns.forEach((b) => b.classList.remove("active"));
                        this.classList.add("active");

                        // Filter products
                        const category = this.dataset.category;
                        filterProducts(category);
                    });
                });
            }

            function setupSorting() {
                const sortSelect = document.getElementById("sortSelect");
                if (sortSelect) {
                    sortSelect.addEventListener("change", function () {
                        sortProducts(this.value);
                    });
                }
            }

            function sortProducts(sortType) {
                const productsGrid = document.getElementById("products-grid");
                const productCards = Array.from(productsGrid.children);

                productCards.sort((a, b) => {
                    const productA = productsData.find(
                        (p) =>
                            p.slug ===
                            a.querySelector(".product-card").dataset.slug,
                    );
                    const productB = productsData.find(
                        (p) =>
                            p.slug ===
                            b.querySelector(".product-card").dataset.slug,
                    );

                    switch (sortType) {
                        case "newest":
                            return (
                                new Date(productB.date) -
                                new Date(productA.date)
                            );
                        case "price-low":
                            return (
                                (productA.price || 0) - (productB.price || 0)
                            );
                        case "price-high":
                            return (
                                (productB.price || 0) - (productA.price || 0)
                            );
                        case "name-az":
                            return (productA.title || "").localeCompare(
                                productB.title || "",
                            );
                        case "name-za":
                            return (productB.title || "").localeCompare(
                                productA.title || "",
                            );
                        default:
                            return 0;
                    }
                });

                productCards.forEach((card) => productsGrid.appendChild(card));
            }

            function filterProducts(category) {
                const productCards = document.querySelectorAll(".product-card");
                let visibleCount = 0;

                productCards.forEach((card) => {
                    const productCategory = card.dataset.category;
                    if (category === "all" || productCategory === category) {
                        card.parentElement.style.display = "block";
                        visibleCount++;
                    } else {
                        card.parentElement.style.display = "none";
                    }
                });

                // Show/hide no products message
                const noProductsMsg = document.getElementById("no-products");
                if (visibleCount === 0) {
                    noProductsMsg.style.display = "block";
                } else {
                    noProductsMsg.style.display = "none";
                }
            }
        </script>
    </body>
</html>
